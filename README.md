# Dotfield

[![built with nix](https://builtwithnix.org/badge.svg)](https://builtwithnix.org)

> The map is open and connectable in all of its dimensions; it is detachable,
> reversible, susceptible to constant modification. … The map has to do with
> performance, whereas the tracing always involves an alleged “competence”.

My worlds and systems, a nutrient-rich collection of typos feeding the hungry
heads of a talking planet, "oriented toward an experimentation in contact with
the real".

These are my personal configurations and are not intended for use as a template,
but you are welcome to do so if you like! I hope visitors manage to find
something helpful/inspiring/interesting, but please keep in mind that *I have no
idea what I'm doing*.

Dotfield does not embody "best practices" or "the right way to Nix". The project
exists as an evolving and unstable result of one amateur's take on identifying
and implementing flexible and understandishable patterns or novelties across
other sources this amateur has encountered.

Feel free to copy/modify/fork under the terms of [the license](./COPYING), but
nothing here is guaranteed to work. In fact, some of it *doesn't* work or might
be total nonsense, but I will generally indicate that with `FIXME` or `TODO`
comments scattered throughout.

## Fellow Travellers

If you have questions or feedback, please ask away! If you use anything within
as a starting point for your own configurations and find that my implementation
doesn't work for you, feel free to ask for help. Even if I can't help, I would
be interested to hear about what you've encountered -- perhaps such an issue
would be something I'd have run into at a future point.

## Structure

More details forthcoming...

## Systems

### `ryosuke` [Teenage Engineering Computer-1]

Ryosuke is a "ghost of the circuit", a denizen of Kairo, LoBE.

[PCPartPicker Part List](https://pcpartpicker.com/list/pXZ9nt)

Type|Item
:----|:----
**CPU** | [AMD Ryzen 9 5900X 3.7 GHz 12-Core Processor](https://pcpartpicker.com/product/KwLwrH/amd-ryzen-9-5900x-37-ghz-12-core-processor-100-100000061wof)
**CPU Cooler** | [Noctua NH-L9a-AM4 33.84 CFM CPU Cooler](https://pcpartpicker.com/product/DZfhP6/noctua-nh-l9a-am4-338-cfm-cpu-cooler-nh-l9a-am4)
**Motherboard** | [Gigabyte X570SI AORUS PRO AX Mini ITX AM4 Motherboard](https://pcpartpicker.com/product/s792FT/gigabyte-x570si-aorus-pro-ax-mini-itx-am4-motherboard-x570si-aorus-pro-ax)
**Memory** | [Corsair Vengeance LPX 32 GB (2 x 16 GB) DDR4-3600 CL18 Memory](https://pcpartpicker.com/product/Yg3mP6/corsair-vengeance-lpx-32-gb-2-x-16-gb-ddr4-3600-memory-cmk32gx4m2d3600c18)
**Storage** | [Samsung 970 Evo Plus 1 TB M.2-2280 NVME Solid State Drive](https://pcpartpicker.com/product/Zxw7YJ/samsung-970-evo-plus-1-tb-m2-2280-nvme-solid-state-drive-mz-v7s1t0bam)
**Video Card** | [PowerColor Radeon RX 6500 XT 4 GB ITX Video Card](https://pcpartpicker.com/product/DxjBD3/powercolor-radeon-rx-6500-xt-4-gb-itx-video-card-axrx-6500xt-4gbd6-dh)
**Case** | [teenage engineering Computer-1 Mini ITX Desktop Case](https://pcpartpicker.com/product/sdRYcf/teenage-engineering-computer-1-mini-itx-desktop-case-te030as001)
**Power Supply** | [Corsair SF 600 W 80+ Platinum Certified Fully Modular SFX Power Supply](https://pcpartpicker.com/product/BtsmP6/corsair-sf-600w-80-platinum-certified-fully-modular-sfx-power-supply-cp-9020182-na)
**Case Fan** | [Noctua A8 PWM chromax.black.swap 32.67 CFM 80 mm Fan](https://pcpartpicker.com/product/Jdwkcf/noctua-nf-a8-pwm-chromaxblackswap-3267-cfm-80-mm-fan-nf-a8-pwm-chromaxblackswap)

The Ryzen 9 5900X processor and mini-ITX Teenage Engineering Computer-1 case are the stars here.

This is my primary computer. I carry it up and down three flights of stairs
every day. I've also used it in the office as a "laptop".

### `boschic`

A three-faced beast lurking in the shadows of my living room.

Originally built in 2015, recently revamped for ~computing power~ ~playing Myst in VR~
~Elden Ring~ fun.

<table>
<tbody>
<tr>
<th class="org-left">CPU</th>
<td class="org-left">AMD Ryzen 5 5600X 3.7 GHz 6-Core Processor</td>
</tr>

<tr>
<th class="org-left">CPU Cooler</th>
<td class="org-left">Noctua NH-D15 82.5 CFM CPU Cooler</td>
</tr>

<tr>
<th class="org-left">Motherboard</th>
<td class="org-left">Asus ROG STRIX B450-F GAMING II ATX AM4 Motherboard</td>
</tr>

<tr>
<th class="org-left">Memory</th>
<td class="org-left">Corsair Vengeance LPX 32 GB (2 x 16 GB) DDR4-3600 CL18 Memory</td>
</tr>

<tr>
<th class="org-left">Storage</th>
<td class="org-left">Seagate BarraCuda 1 TB 3.5&ldquo; 7200RPM Internal Hard Drive</td>
</tr>

<tr>
<th class="org-left">Storage</th>
<td class="org-left">Crucial MX100 256 GB 2.5&ldquo; Solid State Drive</td>
</tr>

<tr>
<th class="org-left">Storage</th>
<td class="org-left">Samsung 970 Evo Plus 2 TB M.2-2280 NVME Solid State Drive</td>
</tr>

<tr>
<th class="org-left">GPU</th>
<td class="org-left">NVIDIA GeForce RTX 3080 Ti 12 GB Founders Edition Video Card</td>
</tr>

<tr>
<th class="org-left">Case</th>
<td class="org-left">Phanteks Enthoo Pro ATX Full Tower Case</td>
</tr>

<tr>
<th class="org-left">PSU</th>
<td class="org-left">Corsair AX 760 W 80+ Platinum Certified Fully Modular ATX Power Supply</td>
</tr>

<tr>
<th class="org-left">Wireless Adapter</th>
<td class="org-left">TP-Link Archer T5E 802.11a/b/g/n/ac PCIe x1 Wi-Fi Adapter</td>
</tr>
</tbody>
</table>

#### Face One: Gaming + VR

I don't want to open a gateway to [my own VR Hell on NixOS][vrhell], so this
Face should only be summoned after invoking the Ten Windows.

[vrhell]: https://xeiaso.net/blog/nixos-vr-hell-2021-12-02

#### Face Two: Home Theater PC

Boschic is connected to a ViewSonic "4K" projector pointed at a ceiling-mounted
100in. screen.

While the Plex Media Player experience on NixOS is... manageable... I suspect that the situation may be deteriorating:

Plex has stated they will be dropping support for the "Plex Media Player"
application. And it shows. This would be fine with me, because its UI is
terrible, especially in 4K resolution across the room. Its UI animations are
janky and jittery as hell. And yet... it plays even 4K video perfectly.

The ~new~ resurrected Plex HTPC application is beautiful. The design is
well-thought-out for my own sort of use case. However, it requires Flatpak
(yuck), and it totally fails to play back even low-resolution videos on my
projector without introducing unwatchable stuttering. I've noticed some log
errors relating to WebGL. It seems to be related to Wayland/XWayland. I thought
that the proprietary NVIDIA drivers fixed the issue, but then it came back. It's
completely unusable with Nouveau.

So, uh, I don't know.

My roommates usually invoke the Ten Windows before playing video anyway. I'm
sure this says something about how I have not done a great job making the
NixOS-GNOME HTPC experience easily approachable on a guest user account (that's
`zortflower`!), but I've ran into so many issues trying to get it working on my
own account that I totally understand.

#### Face Three: Daily Driver

Currently my primary computer, which has caused some conflict and pain (I
literally sit on the couch all day). This shouldn't be the case for much longer
though.

### `HodgePodge` aka the "Sacred Chao"

An early-2014 15-inch MacBook Pro who has seen quite the life. Mostly unused for
the past several years due to the availability of more portable work laptops. It
is now living out its life in a declarative retirement home.

Its excessive clunkiness is excacerbated by the sharp edges exposed on its
sturdy sticker-laden plastic case over the years. The situation is more
manageable now thanks to the globs of Sugru preventing any further bodily harm.


### Incubation


#### "`tsone`" (working title)

Hetzner SX134.

For backups, remote builds, mass storage, pretty much everything that needs to
be accessible remotely.

##### Planned

- ArchiveBox
- BorgBackup archive storage from other hosts
- Some sort of fast "cloud" storage for everyday use (notes and document sync, recent photos, etc.)

#### `sommoch` [damaged+misplaced]

Dead but dreaming.

Laid to indefinite rest when one of the cats, seeking human attention, chewed
through the LCD screen. We did not speak for a week.

Still works, but unusable without external display.

Suffers from congenital Butterfly Keyboard Syndrome. Runs macOS.

Currently lost somewhere in the meat ether.

## Identities

From https://github.com/drduh/YubiKey-Guide#using-keys:

```sh
export KEYID="0x135EEDD0F71934F3"
gpg --recv $KEYID
```


## Vertebrae

- [hercules-ci/flake-parts][flake-parts] :: a framework for flake modules
- [divnix/digga][digga] :: helpful lib functions and examples

[flake-parts]: https://github.com/hercules-ci/flake-parts
[digga]: https://github.com/divnix/digga

## Grafts

Generally in order of [frecency][frecency], along with an optional description
of reasons for inclusion.

More recently, I've aimed to reference sources with comments and SPDX headings
in relevant files.

### NixOS/nix-darwin/home-manager

- https://github.com/Mic92/dotfiles :: nixos, flake-parts, extensive, fleets, networking, structure, secrets management
- https://github.com/viperML/dotfiles :: nixos, flake-parts, structure
- https://git.sr.ht/~misterio/nix-config/ :: nixos, desktops, similar goals, simplicity and clarity, aesthetics
- https://github.com/srid/nixos-config :: nixos, flake-parts
- https://github.com/TLATER/dotfiles :: home-manager, structure
- https://github.com/hlissner/dotfiles :: nixos, libs, original, structure, homes w/o home-manager
- https://github.com/colemickens/nixcfg :: nixos, extensive, fun
- https://github.com/cole-h/nixos-config/ :: nixos, media server
- https://github.com/kclejeune/system :: nixos, home-manager
- https://github.com/Xe/nixos-configs :: networking, extensive
- https://github.com/sei40kr/dotfiles
- https://github.com/malob/nixpkgs :: nix-darwin, docs
- https://github.com/ahmedelgabri/dotfiles
- https://github.com/cmacrae/config :: nix-darwin, nixos, emacs
- https://github.com/d12frosted/environment :: nixos, nix-darwin, provisioning, world-building, emacs, docs

### Emacs

- [tecosaur's doom configs][tecosaur-doom] :: doom, aesthetics
- [elken's doom configs][elken-doom]
- [d12frosted's emacs configs][d12frosted-emacs]


[frecency]: https://en.wikipedia.org/wiki/Frecency
[tecosaur-doom]: https://tecosaur.github.io/emacs-config/config.html
[elken-doom]: https://github.com/elken/doom
[d12frosted-emacs]: https://github.com/d12frosted/environment/tree/master/emacs

## Errata

### kitty terminal custom icons

kitty's FAQ page shows a small collection of high-quality alternative icons designed by some kitty fans.

<https://sw.kovidgoyal.net/kitty/faq/#i-do-not-like-the-kitty-icon>

While I personally don't _dislike_ the kitty icon, these alternatives are great.

- **Currently: <https://github.com/DinkDonk/kitty-icon>**
- <https://github.com/k0nserv/kitty-icon>
- <https://github.com/hristost/kitty-alternative-icon>

#### NixOS

Not yet.

#### macOS

There's a couple hoops to jump through in order to specify a custom application icon.

And, unfortunately, because I currently install `kitty.app` with Homebrew due to
frequent build failures with `nixpkgs#kitty`, any customisations will be
reverted whenever the app updates.

I've added a script called `kitty-set-app-icon` to re-copy the desired icon back
to `kitty.app` post-update. This script is available via the
`kitty-helpers.setAppIcon` package.

Credit goes to [this blog post](https://www.sethvargo.com/replace-icons-osx/) for outlining a simple alternative to the usual drag-and-drop approach.

## License

Copyright (C) 2020-2022 Chris Montgomery

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You may read the license in full within the [COPYING](./COPYING) file included
in the project root. You may also find it at <https://www.gnu.org/licenses/>
